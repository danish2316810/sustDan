sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageBox"],function(e){"use strict";return e.extend("com.techm.sustainabilityui.controller.MiningForm",{onInit:function(){that=this;let e=sap.ui.core.UIComponent.getRouterFor(this);let t=new sap.ui.model.json.JSONModel("model/mock.json");this.getView().byId("box0").setModel(t,"divisionModel");let o=new sap.ui.model.json.JSONModel("model/mock.json");this.getView().byId("box1").setModel(o,"locationModel");let i=new sap.ui.model.json.JSONModel("model/mock.json");this.getView().byId("box2").setModel(i,"yearModel");let r=new sap.ui.model.json.JSONModel("model/mock.json");this.getView().byId("directUnit").setModel(r,"directUnit");let a=new sap.ui.model.json.JSONModel("model/mock.json");this.getView().byId("inDirectUnit").setModel(a,"inDirectUnit");let l=new sap.ui.model.json.JSONModel("model/mock.json");this.getView().byId("waterUnit").setModel(l,"waterUnit");this.getView().byId("waterUnit1").setModel(l,"waterUnit");this.getView().byId("waterRecycleUnit").setModel(l,"waterUnit");let n=new sap.ui.model.json.JSONModel("model/mock.json");this.getView().byId("emissionUnit2").setModel(n,"emissionUnit");this.getView().byId("materialUnit").setModel(n,"emissionUnit");let s=new sap.ui.model.json.JSONModel("model/mock.json");this.getView().setModel(s,"viewModel");let d=new sap.ui.model.json.JSONModel("model/mock.json");this.getView().byId("deOptions").setModel(d,"DEOptionsModel");let p=new sap.ui.model.json.JSONModel("model/mock.json");this.getView().byId("ideOptions").setModel(p,"IDEOptionsModel");let u=new sap.ui.model.json.JSONModel("model/mock.json");this.getView().byId("waterOptions").setModel(u,"WaterOptionsModel");let m=new sap.ui.model.json.JSONModel("model/mock.json");this.getView().byId("wasteOptions").setModel(m,"WasteOptionsModel");let c=new sap.ui.model.json.JSONModel("model/mock.json");this.getView().byId("commuteOptions").setModel(c,"CommuteModel");let g=new sap.ui.model.json.JSONModel("model/mock.json");this.getView().byId("personalCommuteOptions").setModel(g,"PersonalCommuteModel");let y=new sap.ui.model.json.JSONModel("model/mock.json");this.getView().byId("businessTravelOptions").setModel(y,"BusinessTravelModel");let w=new sap.ui.model.json.JSONModel("model/mock.json");this.getView().byId("upstreamTravelOptions").setModel(w,"UpstreamTransModel");let b=new sap.ui.model.json.JSONModel("model/mock.json");this.getView().byId("wfhOptions").setModel(b,"RemoteModel");let v=new sap.ui.model.json.JSONModel("model/mock.json");this.getView().setModel(v,"unitModel");let h=new sap.ui.model.json.JSONModel("model/mock.json");this.getView().byId("miningDETypes").setModel(h,"MiningDEModel");let F=new sap.ui.model.json.JSONModel("model/mock.json");this.getView().byId("miningIDETypes").setModel(F,"MiningIDEModel");let O=new sap.ui.model.json.JSONModel("model/mock.json");this.getView().byId("miningDirectUnit").setModel(O,"directUnit");let I=new sap.ui.model.json.JSONModel("model/mock.json");this.getView().byId("MininginDirectUnit").setModel(I,"inDirectUnit");this.onPressGo(event)},setTimeout:function(){var e=this.getView().byId("imgcar");setTimeout(function(){e.next()},2500)},callODataService:function(){var e=this;var t=new sap.m.BusyDialog({});t.open();var o=this.getOwnerComponent().getModel("dataModel");o.read("/Direct_Energy",{success:function(o,i){t.close();var r=new sap.ui.model.json.JSONModel;r.setData(o);e.getView().byId("sustain").setModel(r)},error:function(e){t.close()}})},onPressGo:function(e){var t=this;t.getView().byId("CS").setVisible(true);this.getView().byId("btn1").setVisible(true);this.getView().byId("btn2").setVisible(true);this.getView().byId("btn3").setVisible(true);var o=new sap.m.BusyDialog({});o.open();var i=this.getOwnerComponent().getModel("dataModel");i.read("/Sustainability_Report_Temp",{success:function(e,i){o.close();var r=new sap.ui.model.json.JSONModel;r.setData(e);t.getView().byId("directEnergy").setModel(r);t.getView().byId("waterTbl").setModel(r);t.getView().byId("waterTbl1").setModel(r);t.getView().byId("inDirectEnergyTbl").setModel(r);t.getView().byId("wasteTbl").setModel(r);t.getView().byId("recycleTbl").setModel(r);t.getView().byId("materialTbl").setModel(r);t.getView().byId("commuteTbl").setModel(r);t.getView().byId("personalTbl").setModel(r);t.getView().byId("businessTbl").setModel(r);t.getView().byId("upstreamTbl").setModel(r);t.getView().byId("wfhTbl").setModel(r);t.getView().byId("miningDirectEnergy").setModel(r);t.getView().byId("miningInDirectEnergyTbl").setModel(r);t.onSelectionOfYear()},error:function(e){o.close()}})},onPressSubmit:function(e){var t={ReportType:"DirectEnergy"};var o={definitionId:"reportapprovalwf",context:t};$.ajax({url:"/comtechmsustainabilityui/bpmworkflowruntime/v1/xsrf-token",method:"GET",headers:{"X-CSRF-Token":"Fetch"},success:function(e,t,i){var r=i.getResponseHeader("X-CSRF-Token");if(r===null)return;$.ajax({url:"/comtechmsustainabilityui/bpmworkflowruntime/v1/workflow-instances",type:"POST",data:JSON.stringify(o),headers:{"X-CSRF-Token":r,"Content-Type":"application/json"},async:false,success:function(e){MessageBox.information("The Records successfully submitted for approval")},error:function(e){}})}})},pageChanged:function(){setTimeout(function(){carousel.next()},2500)},handleDownloadPress:function(e){this.selectedTableRow=e.getSource().getBindingContext().getObject();window.open("./documents/DirectEnergy.pdf")},handleDownloadPress_Indirect:function(e){this.selectedTableRow=e.getSource().getBindingContext().getObject();window.open("./documents/InDirectEnergy.pdf")},handleDownloadPress_Water:function(e){this.selectedTableRow=e.getSource().getBindingContext().getObject();window.open("./documents/Water.pdf")},handleDownloadPress_Emission:function(e){this.selectedTableRow=e.getSource().getBindingContext().getObject();window.open("./documents/Emission.pdf")},handleDownloadExcel:function(e){window.open("./documents/Sustainability_Report_1.csv")},handleConnectToLocalSystem:function(e){sap.m.MessageToast.show("Pls share your system Details! We will load data for you.!!")},myFormatter:function(e){return e!==null},myFormatter1:function(e){return e===""||e===null},handleFileUploadAllowed:function(e){sap.m.MessageToast.show("The file got uploaded Successfully!!")},handleTableRowPress:function(e){sap.m.MessageToast.show("table row: "+e.getSource().getBindingContext().getObject())},handleEditBtn:function(e){var t=this;t.getOwnerComponent().getRouter().navTo("Launchpad",{},true)},onPressBack:function(e){this.getOwnerComponent().getRouter().navTo("Launchpad",{},true)},onSelectionOFDirectEnergy:function(e){var t=this;var o=t.getView().byId("directEnergy");var i=o.getBinding("items");i.filter([]);var r=[new sap.ui.model.Filter({path:"Type",operator:sap.ui.model.FilterOperator.EQ,value1:"Direct Energy"}),new sap.ui.model.Filter({path:"SubType",operator:sap.ui.model.FilterOperator.EQ,value1:t.getView().byId("deOptions").getSelectedKey()}),new sap.ui.model.Filter({path:"Year",operator:sap.ui.model.FilterOperator.EQ,value1:t.getView().byId("box2").getSelectedKey()}),new sap.ui.model.Filter({path:"Location",operator:sap.ui.model.FilterOperator.EQ,value1:t.getView().byId("box1").getSelectedKey()})];i.filter(r)},onSelectionOFInDirectEnergy:function(e){var t=this;var o=t.getView().byId("inDirectEnergyTbl");var i=o.getBinding("items");i.filter([]);var r=[new sap.ui.model.Filter({path:"Type",operator:sap.ui.model.FilterOperator.EQ,value1:"InDirectEnergy"}),new sap.ui.model.Filter({path:"SubType",operator:sap.ui.model.FilterOperator.EQ,value1:t.getView().byId("ideOptions").getSelectedKey()}),new sap.ui.model.Filter({path:"Year",operator:sap.ui.model.FilterOperator.EQ,value1:t.getView().byId("box2").getSelectedKey()}),new sap.ui.model.Filter({path:"Location",operator:sap.ui.model.FilterOperator.EQ,value1:t.getView().byId("box1").getSelectedKey()})];i.filter(r)},onSelectionOfWaterWithdrawal:function(e){var t=this;var o=t.getView().byId("waterTbl");var i=o.getBinding("items");i.filter([]);var r=[new sap.ui.model.Filter({path:"Type",operator:sap.ui.model.FilterOperator.EQ,value1:"Water Withdrawal"}),new sap.ui.model.Filter({path:"SubType",operator:sap.ui.model.FilterOperator.EQ,value1:t.getView().byId("waterOptions").getSelectedKey()}),new sap.ui.model.Filter({path:"Year",operator:sap.ui.model.FilterOperator.EQ,value1:t.getView().byId("box2").getSelectedKey()}),new sap.ui.model.Filter({path:"Location",operator:sap.ui.model.FilterOperator.EQ,value1:t.getView().byId("box1").getSelectedKey()})];i.filter(r)},onSelectionOfWaterDischarge:function(e){var t=this;var o=t.getView().byId("waterTbl1");var i=o.getBinding("items");i.filter([]);var r=[new sap.ui.model.Filter({path:"Type",operator:sap.ui.model.FilterOperator.EQ,value1:"Water discharge"}),new sap.ui.model.Filter({path:"SubType",operator:sap.ui.model.FilterOperator.EQ,value1:t.getView().byId("waterDischargeOptions").getSelectedKey()}),new sap.ui.model.Filter({path:"Year",operator:sap.ui.model.FilterOperator.EQ,value1:t.getView().byId("box2").getSelectedKey()}),new sap.ui.model.Filter({path:"Location",operator:sap.ui.model.FilterOperator.EQ,value1:t.getView().byId("box1").getSelectedKey()})];i.filter(r)},onSelectionOfWaste:function(e){var t=this;var o=t.getView().byId("wasteTbl");var i=o.getBinding("items");i.filter([]);var r=[new sap.ui.model.Filter({path:"Type",operator:sap.ui.model.FilterOperator.EQ,value1:"Waste"}),new sap.ui.model.Filter({path:"SubType",operator:sap.ui.model.FilterOperator.EQ,value1:t.getView().byId("wasteOptions").getSelectedKey()}),new sap.ui.model.Filter({path:"Year",operator:sap.ui.model.FilterOperator.EQ,value1:t.getView().byId("box2").getSelectedKey()}),new sap.ui.model.Filter({path:"Location",operator:sap.ui.model.FilterOperator.EQ,value1:t.getView().byId("box1").getSelectedKey()})];i.filter(r)},onSelectionOfCommute:function(e){var t=this;var o=t.getView().byId("commuteTbl");var i=o.getBinding("items");i.filter([]);var r=[new sap.ui.model.Filter({path:"Type",operator:sap.ui.model.FilterOperator.EQ,value1:"Commute"}),new sap.ui.model.Filter({path:"SubType",operator:sap.ui.model.FilterOperator.EQ,value1:t.getView().byId("commuteOptions").getSelectedKey()}),new sap.ui.model.Filter({path:"Year",operator:sap.ui.model.FilterOperator.EQ,value1:t.getView().byId("box2").getSelectedKey()}),new sap.ui.model.Filter({path:"Location",operator:sap.ui.model.FilterOperator.EQ,value1:t.getView().byId("box1").getSelectedKey()})];i.filter(r)},onSelectionOfPersonalCommute:function(e){var t=this;var o=t.getView().byId("personalTbl");var i=o.getBinding("items");i.filter([]);var r=[new sap.ui.model.Filter({path:"Type",operator:sap.ui.model.FilterOperator.EQ,value1:"Personal Commute"}),new sap.ui.model.Filter({path:"SubType",operator:sap.ui.model.FilterOperator.EQ,value1:t.getView().byId("personalCommuteOptions").getSelectedKey()}),new sap.ui.model.Filter({path:"Year",operator:sap.ui.model.FilterOperator.EQ,value1:t.getView().byId("box2").getSelectedKey()}),new sap.ui.model.Filter({path:"Location",operator:sap.ui.model.FilterOperator.EQ,value1:t.getView().byId("box1").getSelectedKey()})];i.filter(r)},onSelectionOfBusinessTravel:function(e){var t=this;var o=t.getView().byId("businessTbl");var i=o.getBinding("items");i.filter([]);var r=[new sap.ui.model.Filter({path:"Type",operator:sap.ui.model.FilterOperator.EQ,value1:"Business Travel"}),new sap.ui.model.Filter({path:"SubType",operator:sap.ui.model.FilterOperator.EQ,value1:t.getView().byId("businessTravelOptions").getSelectedKey()}),new sap.ui.model.Filter({path:"Year",operator:sap.ui.model.FilterOperator.EQ,value1:t.getView().byId("box2").getSelectedKey()}),new sap.ui.model.Filter({path:"Location",operator:sap.ui.model.FilterOperator.EQ,value1:t.getView().byId("box1").getSelectedKey()})];i.filter(r)},onSelectionOfUpstreamTrans:function(e){var t=this;var o=t.getView().byId("upstreamTbl");var i=o.getBinding("items");i.filter([]);var r=[new sap.ui.model.Filter({path:"Type",operator:sap.ui.model.FilterOperator.EQ,value1:"Upstream Transportation"}),new sap.ui.model.Filter({path:"SubType",operator:sap.ui.model.FilterOperator.EQ,value1:t.getView().byId("upstreamTravelOptions").getSelectedKey()}),new sap.ui.model.Filter({path:"Year",operator:sap.ui.model.FilterOperator.EQ,value1:t.getView().byId("box2").getSelectedKey()}),new sap.ui.model.Filter({path:"Location",operator:sap.ui.model.FilterOperator.EQ,value1:t.getView().byId("box1").getSelectedKey()})];i.filter(r)},onSelectionOfRemoteWorking:function(e){var t=this;var o=t.getView().byId("wfhTbl");var i=o.getBinding("items");i.filter([]);var r=[new sap.ui.model.Filter({path:"Type",operator:sap.ui.model.FilterOperator.EQ,value1:"Remote Working"}),new sap.ui.model.Filter({path:"SubType",operator:sap.ui.model.FilterOperator.EQ,value1:t.getView().byId("wfhOptions").getSelectedKey()}),new sap.ui.model.Filter({path:"Year",operator:sap.ui.model.FilterOperator.EQ,value1:t.getView().byId("box2").getSelectedKey()}),new sap.ui.model.Filter({path:"Location",operator:sap.ui.model.FilterOperator.EQ,value1:t.getView().byId("box1").getSelectedKey()})];i.filter(r)},onSelectionOFMiningDirectEnergy:function(e){var t=this;var o=t.getView().byId("miningDirectEnergy");var i=o.getBinding("items");i.filter([]);var r=[new sap.ui.model.Filter({path:"Type",operator:sap.ui.model.FilterOperator.EQ,value1:"Direct Energy"}),new sap.ui.model.Filter({path:"SubType",operator:sap.ui.model.FilterOperator.EQ,value1:t.getView().byId("miningDETypes").getSelectedKey()}),new sap.ui.model.Filter({path:"Year",operator:sap.ui.model.FilterOperator.EQ,value1:t.getView().byId("box2").getSelectedKey()}),new sap.ui.model.Filter({path:"Location",operator:sap.ui.model.FilterOperator.EQ,value1:t.getView().byId("box1").getSelectedKey()})];i.filter(r)},onSelectionOfYear:function(){var e=this;var t=e.getView().byId("materialTbl");var o=t.getBinding("items");o.filter([]);var i=[new sap.ui.model.Filter({path:"Type",operator:sap.ui.model.FilterOperator.EQ,value1:"Materials"}),new sap.ui.model.Filter({path:"SubType",operator:sap.ui.model.FilterOperator.EQ,value1:"Paper"}),new sap.ui.model.Filter({path:"Year",operator:sap.ui.model.FilterOperator.EQ,value1:e.getView().byId("box2").getSelectedKey()}),new sap.ui.model.Filter({path:"Location",operator:sap.ui.model.FilterOperator.EQ,value1:e.getView().byId("box1").getSelectedKey()})];o.filter(i);var r=e.getView().byId("wasteTbl");var a=r.getBinding("items");a.filter([]);var l=[new sap.ui.model.Filter({path:"Type",operator:sap.ui.model.FilterOperator.EQ,value1:"Waste"}),new sap.ui.model.Filter({path:"SubType",operator:sap.ui.model.FilterOperator.EQ,value1:e.getView().byId("wasteOptions").getSelectedKey()}),new sap.ui.model.Filter({path:"Year",operator:sap.ui.model.FilterOperator.EQ,value1:e.getView().byId("box2").getSelectedKey()}),new sap.ui.model.Filter({path:"Location",operator:sap.ui.model.FilterOperator.EQ,value1:e.getView().byId("box1").getSelectedKey()})];a.filter(l);var n=e.getView().byId("waterTbl");var s=n.getBinding("items");s.filter([]);var d=[new sap.ui.model.Filter({path:"Type",operator:sap.ui.model.FilterOperator.EQ,value1:"Water Withdrawal"}),new sap.ui.model.Filter({path:"SubType",operator:sap.ui.model.FilterOperator.EQ,value1:e.getView().byId("waterOptions").getSelectedKey()}),new sap.ui.model.Filter({path:"Year",operator:sap.ui.model.FilterOperator.EQ,value1:e.getView().byId("box2").getSelectedKey()}),new sap.ui.model.Filter({path:"Location",operator:sap.ui.model.FilterOperator.EQ,value1:e.getView().byId("box1").getSelectedKey()})];s.filter(d);var p=e.getView().byId("recycleTbl");var u=p.getBinding("items");u.filter([]);var m=[new sap.ui.model.Filter({path:"Type",operator:sap.ui.model.FilterOperator.EQ,value1:"Recycled Water"}),new sap.ui.model.Filter({path:"Year",operator:sap.ui.model.FilterOperator.EQ,value1:e.getView().byId("box2").getSelectedKey()}),new sap.ui.model.Filter({path:"Location",operator:sap.ui.model.FilterOperator.EQ,value1:e.getView().byId("box1").getSelectedKey()})];u.filter(m);var c=e.getView().byId("waterTbl1");var g=c.getBinding("items");g.filter([]);var y=[new sap.ui.model.Filter({path:"Type",operator:sap.ui.model.FilterOperator.EQ,value1:"Water Discharged"}),new sap.ui.model.Filter({path:"Year",operator:sap.ui.model.FilterOperator.EQ,value1:e.getView().byId("box2").getSelectedKey()}),new sap.ui.model.Filter({path:"Location",operator:sap.ui.model.FilterOperator.EQ,value1:e.getView().byId("box1").getSelectedKey()})];g.filter(y);var w=e.getView().byId("directEnergy");var b=w.getBinding("items");b.filter([]);var v=[new sap.ui.model.Filter({path:"Type",operator:sap.ui.model.FilterOperator.EQ,value1:"Direct Energy"}),new sap.ui.model.Filter({path:"SubType",operator:sap.ui.model.FilterOperator.EQ,value1:e.getView().byId("deOptions").getSelectedKey()}),new sap.ui.model.Filter({path:"Year",operator:sap.ui.model.FilterOperator.EQ,value1:e.getView().byId("box2").getSelectedKey()}),new sap.ui.model.Filter({path:"Location",operator:sap.ui.model.FilterOperator.EQ,value1:e.getView().byId("box1").getSelectedKey()})];b.filter(v);var h=e.getView().byId("inDirectEnergyTbl");var F=h.getBinding("items");F.filter([]);var O=[new sap.ui.model.Filter({path:"Type",operator:sap.ui.model.FilterOperator.EQ,value1:"InDirectEnergy"}),new sap.ui.model.Filter({path:"SubType",operator:sap.ui.model.FilterOperator.EQ,value1:e.getView().byId("ideOptions").getSelectedKey()}),new sap.ui.model.Filter({path:"Year",operator:sap.ui.model.FilterOperator.EQ,value1:e.getView().byId("box2").getSelectedKey()}),new sap.ui.model.Filter({path:"Location",operator:sap.ui.model.FilterOperator.EQ,value1:e.getView().byId("box1").getSelectedKey()})];F.filter(O);var I=e.getView().byId("commuteTbl");var f=I.getBinding("items");f.filter([]);var E=[new sap.ui.model.Filter({path:"Type",operator:sap.ui.model.FilterOperator.EQ,value1:"Commute"}),new sap.ui.model.Filter({path:"SubType",operator:sap.ui.model.FilterOperator.EQ,value1:e.getView().byId("commuteOptions").getSelectedKey()}),new sap.ui.model.Filter({path:"Year",operator:sap.ui.model.FilterOperator.EQ,value1:e.getView().byId("box2").getSelectedKey()}),new sap.ui.model.Filter({path:"Location",operator:sap.ui.model.FilterOperator.EQ,value1:e.getView().byId("box1").getSelectedKey()})];f.filter(E);var S=e.getView().byId("personalTbl");var V=S.getBinding("items");V.filter([]);var T=[new sap.ui.model.Filter({path:"Type",operator:sap.ui.model.FilterOperator.EQ,value1:"Personal Commute"}),new sap.ui.model.Filter({path:"SubType",operator:sap.ui.model.FilterOperator.EQ,value1:e.getView().byId("personalCommuteOptions").getSelectedKey()}),new sap.ui.model.Filter({path:"Year",operator:sap.ui.model.FilterOperator.EQ,value1:e.getView().byId("box2").getSelectedKey()}),new sap.ui.model.Filter({path:"Location",operator:sap.ui.model.FilterOperator.EQ,value1:e.getView().byId("box1").getSelectedKey()})];V.filter(T);var M=e.getView().byId("businessTbl");var Q=M.getBinding("items");Q.filter([]);var x=[new sap.ui.model.Filter({path:"Type",operator:sap.ui.model.FilterOperator.EQ,value1:"Business Travel"}),new sap.ui.model.Filter({path:"SubType",operator:sap.ui.model.FilterOperator.EQ,value1:e.getView().byId("businessTravelOptions").getSelectedKey()}),new sap.ui.model.Filter({path:"Year",operator:sap.ui.model.FilterOperator.EQ,value1:e.getView().byId("box2").getSelectedKey()}),new sap.ui.model.Filter({path:"Location",operator:sap.ui.model.FilterOperator.EQ,value1:e.getView().byId("box1").getSelectedKey()})];Q.filter(x);var D=e.getView().byId("upstreamTbl");var K=D.getBinding("items");K.filter([]);var j=[new sap.ui.model.Filter({path:"Type",operator:sap.ui.model.FilterOperator.EQ,value1:"Upstream Transportation"}),new sap.ui.model.Filter({path:"SubType",operator:sap.ui.model.FilterOperator.EQ,value1:e.getView().byId("upstreamTravelOptions").getSelectedKey()}),new sap.ui.model.Filter({path:"Year",operator:sap.ui.model.FilterOperator.EQ,value1:e.getView().byId("box2").getSelectedKey()}),new sap.ui.model.Filter({path:"Location",operator:sap.ui.model.FilterOperator.EQ,value1:e.getView().byId("box1").getSelectedKey()})];K.filter(j);var B=e.getView().byId("wfhTbl");var C=B.getBinding("items");C.filter([]);var N=[new sap.ui.model.Filter({path:"Type",operator:sap.ui.model.FilterOperator.EQ,value1:"Remote Working"}),new sap.ui.model.Filter({path:"SubType",operator:sap.ui.model.FilterOperator.EQ,value1:e.getView().byId("wfhOptions").getSelectedKey()}),new sap.ui.model.Filter({path:"Year",operator:sap.ui.model.FilterOperator.EQ,value1:e.getView().byId("box2").getSelectedKey()}),new sap.ui.model.Filter({path:"Location",operator:sap.ui.model.FilterOperator.EQ,value1:e.getView().byId("box1").getSelectedKey()})];C.filter(N);var w=e.getView().byId("miningDirectEnergy");var b=w.getBinding("items");b.filter([]);var v=[new sap.ui.model.Filter({path:"Type",operator:sap.ui.model.FilterOperator.EQ,value1:"Direct Energy"}),new sap.ui.model.Filter({path:"SubType",operator:sap.ui.model.FilterOperator.EQ,value1:e.getView().byId("miningDETypes").getSelectedKey()}),new sap.ui.model.Filter({path:"Year",operator:sap.ui.model.FilterOperator.EQ,value1:e.getView().byId("box2").getSelectedKey()}),new sap.ui.model.Filter({path:"Location",operator:sap.ui.model.FilterOperator.EQ,value1:e.getView().byId("box1").getSelectedKey()})];b.filter(v);var h=e.getView().byId("miningInDirectEnergyTbl");var F=h.getBinding("items");F.filter([]);var O=[new sap.ui.model.Filter({path:"Type",operator:sap.ui.model.FilterOperator.EQ,value1:"InDirectEnergy"}),new sap.ui.model.Filter({path:"SubType",operator:sap.ui.model.FilterOperator.EQ,value1:e.getView().byId("miningIDETypes").getSelectedKey()}),new sap.ui.model.Filter({path:"Year",operator:sap.ui.model.FilterOperator.EQ,value1:e.getView().byId("box2").getSelectedKey()}),new sap.ui.model.Filter({path:"Location",operator:sap.ui.model.FilterOperator.EQ,value1:e.getView().byId("box1").getSelectedKey()})];F.filter(O)},onDivisionSelectionChange:function(e){},handleUploadPress:function(){var e=new sap.m.BusyDialog({title:"UploadFile",text:"Uploading ......"});e.open();var t=this;var o=this.getView().byId("fileUploader");var i=o.getFocusDomRef();var r=i.files[0];var a={clientId:"default",documentType:"invoice",enrichment:{},schemaId:"cd64a5e8-0fdf-4de1-a084-4f39046f4609",templateId:"3ccd15e8-617d-4ad9-8ccf-b37e6bdbcec6"};var l=new FormData;l.append("file",r);l.append("options",'{"clientId": "default","documentType": "invoice","enrichment": {},"schemaId": "c5c7e09b-4489-47e6-810d-4d78e19edd34","templateId": "74e63a34-15fd-462c-a42a-8a58c30defbe"}');console.log(a);var n="/comtechmsustainabilityui/DocExtractor/document-information-extraction/v1/document/jobs";jQuery.ajax({url:"https://86b1df35trial.authentication.eu10.hana.ondemand.com/oauth/token?grant_type=client_credentials",method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic c2ItNTYwYTY2YjQtMWE4Yi00YTQ1LThhODUtNzA3MmQ0MzA4OTVmIWIxMTUwMTN8bmEtOWU1MDQ5OWYtNzhkZC00MGNhLWFkOGQtNjBhY2YwMmNmZjhiIWIzMDQxNzpSSUkyTXB3NUVZYnVRTzFvYWdENmRlU25FVkk9"},success:function(t,o,i){console.log("Success",t);var r="Bearer "+t.access_token;var a=jQuery.ajax({url:n,method:"POST",timeout:0,headers:{Authorization:r,Accept:"application/json"},processData:false,mimeType:"multipart/form-data",contentType:false,data:l,success:function(t,o,i){e.close();console.log("fileUploaded Successfully");console.log("data",t.id);var a=JSON.parse(t);getExtractionResults(a.id,r)},error:function(e,t,o){console.log("Error: "+o);console.log("Status: "+t)},complete:function(t,o){e.close();console.log("xhr: "+t);console.log("Status: "+o)}})},error:function(t,o,i){e.close();sap.m.MessageToast.show("Error in fetching token: "+i)},complete:function(e,t){console.log("xhr: "+e);console.log("Status: "+t)}})}})});var that;function getExtractionResults(e,t){var o=new sap.m.BusyDialog({title:"Extracting Results",text:"Extraction is in progress.. Please wait"});o.open();var i=e;var r=t;var a={results:[]};var l="/comtechmsustainabilityui/DocExtractor"+"/document-information-extraction/v1/document/jobs/"+e+"?returnNullValues=true&extractedValues=true";jQuery.ajax({url:l,method:"GET",headers:{Accept:"application/json",Authorization:t},success:function(e,t,l){if(e.status=="DONE"){o.close();console.log("------ Doc EXTRACTION DONE --------");console.log(e);var n={};for(var s=0;s<e.extraction.headerFields.length;s++){n[e.extraction.headerFields[s].name]=e.extraction.headerFields[s].value}for(var d=0;d<e.extraction.lineItems.length;d++){var p={};for(var u=0;u<e.extraction.lineItems[d].length;u++){p[e.extraction.lineItems[d][u].name]=e.extraction.lineItems[d][u].value}p.Year=n.Year;p.Location=n.Location;p.Division=n.Division;a.results.push(p)}var m=that.getView().byId("directEnergy").getModel().getProperty("/results");var c=m.concat(a.results);that.getView().byId("directEnergy").getModel().getData().results=c;that.getView().byId("directEnergy").getModel().refresh(true);return}else if(e.status=="PENDING"){setTimeout(function(){console.log("Pending");getExtractionResults(i,r)},5e3)}else if(e.status=="FAILED"){a.results=[{Type:"Direct Energy",SubType:"HSD",Month:"January",Value:"1.217",Unit:"gl",Cost:"61919",Currency:"USD",Quality:"n.a",Comment:"OK",Year:"2022",Location:"Nashville",Division:"ACME Industries"},{Type:"Direct Energy",SubType:"LPG",Month:"January",Value:"1.337",Unit:"gl",Cost:"64119",Currency:"USD",Quality:"n.a",Comment:"OK",Year:"2022",Location:"Nashville",Division:"ACME Industries"},{Type:"Water Withdrawal",SubType:"Bottled Water",Month:"January",Value:"9",Unit:"gl",Cost:"921334",Currency:"USD",Quality:"n.a",Comment:"OK",Year:"2022",Location:"Nashville",Division:"ACME Industries"}];var m=that.getView().byId("directEnergy").getModel().getProperty("/results");var c=m.concat(a.results);that.getView().byId("directEnergy").getModel().getData().results=c;that.getView().byId("directEnergy").getModel().refresh(true)}},error:function(e,t,o){sap.m.MessageToast.show("Error in fetching extraction results: "+o)},complete:function(e,t){o.close();console.log("xhr: "+e);console.log("Status: "+t)}})}
//# sourceMappingURL=MiningForm.controller.js.map